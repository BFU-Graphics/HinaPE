# HinaPE - Dev Guidebook 1.0.1 CN

> 写在前面：
>
> 本来想着技术文档本该用英文写，这主要有两个大原因。第一个是作为开源项目应当用国际通用语言方便全世界的开发者读懂你的项目；第二个则是最关键的原因——从一开始就采取最原始的信息来源的语言，而不是经过转译后的语言，能够极大的方便开发者以及维护者去无痛接入社区（指该领域的所有学术研究者、工业开发者、普通学习者等）而不需要<u>二次学习</u>（注：比如，代表同一个事物的词，直接学习国际语言标准版本就可以了。如果先学习中文转译版，那后期势必需要再次学习一遍对应的英文到底是什么。这个过程实际上反而是事倍功半的。）。
>
> 本文目前采取中文书写主要的原因是：这不是一份Documentation，这是一份面向开发者的Guidebook。因为HinaPE 1.0目前还非常稚嫩（这不是坏处！我们目前正需要这份稚嫩），许多功能正处于未开发（待开发）的过程中，因此，在这个阶段，在开发者之间降低沟通成本才是相对比较重要的事情。毫无疑问，在项目后期我们势必需要编写详尽的documentation，但目前，我们制作的是面向Developer的Guidebook。因此，本Guidebook采用中文书写。
>
> 但第一段书写的<u>两大原因</u>仍是不可忽略的，尤其是第二点。因此，开发人员仍需要尽可能掌握一项知识点原初的国际语言。因此，在编写Guidebook的时候，作者也将尽可能注意将所有重点词句的原语言附上。

## Introduction

### 什么是HinaPE？

HinaPE是一个"**HinaPE is not a Physics Engine.**"的递归缩写。致敬鼎鼎大名的GNU（**GNU's Not Unix.**）与Linux（**Linux is not Unix.**）的命名方式。

### 我们能用HinaPE实现什么目的？

1. HinaPE的物理部分是完全独立于它的继承源——Scotty3D的。因此，HinaPE支持实现任何物理模拟算法。
2. HinaPE继承Scotty3D的优秀性质，它渲染部分是开放的。因此，HinaPE支持实现/修改任意光栅化（Rasterizing）渲染以及光线追踪（Pathtracing）渲染。
3. HinaPE继承Scotty3D的优秀性质，它几何部分是开放的。因此因此，HinaPE支持实现/修改任意几何算法与几何数据结构。

### 我们为什么要选择HinaPE？

1. 完完全全跨平台。HinaPE支持主流所有的平台同时开发。
2. 轻量。HinaPE一共不超过150个文件（1.0.1版本：135个），将头文件与实现文件合并，那就只有六十多个文件。同时，HinaPE的依赖非常少，全部以来都在devs文件夹下。
3. 独立性好。每个文件夹之间的逻辑关系联系非常小，在实际开发过程中，完全不需要理解全部文件的内容才能够进行自己的开发。
4. 功能完备。（更多的就不吹了。。。该吹的到时候写到document里。。。）

## Overview

首先，理解每个文件夹的功能担当。

HinaPE完全继承了[Scotty3D](https://github.com/CMU-Graphics/Scotty3D)的主要框架，因此，文件架构也同时被继承了。Scotty3D的功能划分做的非常好，下面我们首先来介绍每个文件夹以及每个文件的作用。

### geometry文件夹

geometry文件夹主要负责

- 定义一种最基本的**<u>可编辑Mesh - HalfEdge</u>**的数据结构。

- 定义**<u>样条（Spline）</u>**数据结构。用于做Geometry算法的实现（Implementation）。

geometry文件夹主要有三个文件（我们将`.h`文件与`.cpp`文件视作同一个文件，下同）

#### halfedge

halfedge是一种半边数据结构，定义了一种可编辑的Mesh，它和普通的Mesh处于同一个地位，可以互相替换。当一个物体使用Halfedge_Mesh的时候，那么这个物体就可以被编辑了。反之则只能渲染不能编辑。推荐先点击[这里](https://cmu-graphics.github.io/Scotty3D/meshedit/halfedge)学习官方文档。

**注意：**这个类十分复杂，强烈建议在前期不要去深入研究`.cpp`中的内容。只需要看完官方文档，然后看着`.h`文件知道怎么使用就可以了。

#### spline

spline，中文译作样条。比如我们所熟知的Bézier curve（贝塞尔曲线）就是一种样条。

这个类在目前只是用于做Animation用的（运行之后的那个Animation标签），所以在开发中我们几乎不需要点开这个文件。

#### util

所有的util文件都只是包含对当前文件夹下其他文件的一些支持函数，等用到的点进来在看也不迟。

#### 小结：

这个文件夹内容少，我们在开发中点进来的频率不高。保持它处于关闭状态，可以降低开发过程中的复杂度。

### gui文件夹

gui文件夹主要负责

- HinaPE**<u>全部</u>**的图形界面的定义与修改都在这个文件夹，但凡遇到图形界面的问题，就到这里来找。

gui文件夹主要有八个文件，但是它们的组织形式非常通俗易懂。在GUI界面下一共6个标签，分别对应的就是layout、model、render、rig、animation、simulation。除此之外的两个文件一个是Widgets，中文译作小组件</u>。另一个则是Manager，顾名思义这是一个管理其他所有标签的一个管理者类。

#### manager

这个类是在gui文件夹下几乎最重要的一个类，我们需要频繁地去修改它。因此，熟练掌握如何修改manager是入手开发HinaPE的第一步。

#### layout、model、render、rig、animation、simulation

这几个文件相似度很高，这里就一起说了。

首先，在开发中，我们动这些文件的机会很少。即使我们真的要动这些文件，在学会如何开发manager之后，其实会发现开发方法都大同小异。因此，这六个文件，在实际开发过程中可以暂时先不过多关注。

#### widgets

这是小组件的文件，我们几乎不会去动它。（当然，如果在有相当的开发能力之后，想要写出更加华丽与漂亮的GUI时当然就会动这个文件。但既然都有相当的开发能力了，那也用不到本Guidebook了。。。）

#### 小结：

这个文件夹在开发中被用到的频率非常高，尤其是manager文件。这并不是因为它很重要，相反它几乎没有算法密集度。但因为我们写的所有的算法什么的都需要通过GUI显示出来，因此，几乎我们每开发一个部分的功能，都需要去修改一下GUI来显示我们做的东西。

因此，熟练掌握GUI是开发HinaPE的一个重要的前提。它能帮我们做出华丽漂亮的界面，写一个好用的GUI也能让我们更好与更舒心地Debug。

### lib文件夹

lib文件夹主要是一些底层的数据结构与数学函数，都十分简洁明了容易阅读。一般情况下我们都不会点开这个文件夹。当然，如果有我们想要自己添加的数据结构或者数学函数的时候，自行在这里添加即可。

### physics文件夹

### platform文件夹

platform文件夹是为了解决跨平台需求而存在的文件夹。我们**<u>不可能</u>**需要打开这个文件夹去修改什么的。因此，直接忽略这个文件夹。

### rays文件夹

TODO: 

## Chapter I - GUI Dev

